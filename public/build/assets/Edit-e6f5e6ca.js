import{Q as sr,a as T}from"./QBreadcrumbs-f1fcde01.js";import{a1 as lr,v as nr,r as dr,E as ir,o as rr,e as ur,a as l,t as cr,d as n,w as or,m as c,u as t,c as mr,f as br,Q as ar}from"./app-a7abb58d.js";import{Q as p}from"./QSelect-57ce204b.js";import{Q as _r}from"./QForm-ea84dcf4.js";import"./QChip-85d4182d.js";import"./rtl-36dd996b.js";const gr={class:"bg-white"},fr={class:"flex justify-between items-center text-color"},Vr={class:"page-header"},vr=l("br",null,null,-1),yr={class:"col-xs-12 col-sm-6"},hr={class:"col-xs-12 col-sm-6"},xr={class:"col-xs-12 col-sm-6"},kr={class:"col-xs-12 col-sm-6"},qr={class:"col-xs-12 col-sm-6"},pr={class:"col-xs-12 col-sm-6"},Sr={class:"col-xs-12 col-sm-6"},Tr={class:"col-xs-12 col-sm-6"},Ur={class:"col-xs-12 col-sm-6"},Br=l("div",{class:"col-xs-12"},[l("p",{class:"q-mt-md text-lg text-color"},"Bank Account")],-1),Cr={class:"col-xs-12 col-sm-6"},Qr={class:"col-xs-12 col-sm-6"},Nr={class:"col-xs-12 col-sm-6"},wr={class:"col-xs-12 col-sm-6"},Ar={class:"col-xs-12 col-sm-6"},Er={class:"col-xs-12"},Dr={class:"flex q-gutter-sm"},zr={__name:"Edit",props:["data","districts","departments"],setup(S){var Q,N,w,A,E,D,F,$,I,H,M,j,z,G,J,K,L,O,P,R,W,X,Y,Z,ee,re,oe,ae,te,se,le,ne,de,ie,ue,ce,me,be,_e;const r=S,u=lr(),o=nr({head_of_family:(Q=r.data)==null?void 0:Q.head_of_family,mobile:(N=r.data)==null?void 0:N.mobile,address:(w=r==null?void 0:r.data)==null?void 0:w.address,epic_no:(A=r==null?void 0:r.data)==null?void 0:A.epic_no,district:(E=r==null?void 0:r.data)!=null&&E.district?{value:(F=(D=r.data)==null?void 0:D.district)==null?void 0:F.id,label:(I=($=r==null?void 0:r.data)==null?void 0:$.district)==null?void 0:I.name}:null,constituency:(H=r==null?void 0:r.data)!=null&&H.constituency?{value:(j=(M=r.data)==null?void 0:M.constituency)==null?void 0:j.id,label:(G=(z=r==null?void 0:r.data)==null?void 0:z.constituency)==null?void 0:G.name}:null,department:(J=r==null?void 0:r.data)!=null&&J.department?{value:(L=(K=r.data)==null?void 0:K.department)==null?void 0:L.id,label:(P=(O=r==null?void 0:r.data)==null?void 0:O.department)==null?void 0:P.name}:null,trade:(R=r==null?void 0:r.data)!=null&&R.trade?{value:(X=(W=r.data)==null?void 0:W.trade)==null?void 0:X.id,label:(Z=(Y=r==null?void 0:r.data)==null?void 0:Y.trade)==null?void 0:Z.name}:null,subTrade:(ee=r==null?void 0:r.data)!=null&&ee.sub_trade?{value:(oe=(re=r.data)==null?void 0:re.sub_trade)==null?void 0:oe.id,label:(te=(ae=r==null?void 0:r.data)==null?void 0:ae.sub_trade)==null?void 0:te.name}:null,bank_name:(le=(se=r.data)==null?void 0:se.bank_account)==null?void 0:le.bank_name,branch_name:(de=(ne=r.data)==null?void 0:ne.bank_account)==null?void 0:de.branch_name,ac_holder:(ue=(ie=r.data)==null?void 0:ie.bank_account)==null?void 0:ue.ac_holder,ac_no:(me=(ce=r.data)==null?void 0:ce.bank_account)==null?void 0:me.ac_no,ifsc:(_e=(be=r.data)==null?void 0:be.bank_account)==null?void 0:_e.ifsc}),_=dr({constituencies:[],trades:[],subTrades:[]}),tr=d=>{o.transform(e=>{var s,i,m,b;return{...e,district_id:(s=e.district)==null?void 0:s.value,constituency_id:(i=e.constituency)==null?void 0:i.value,department_id:(m=e.department)==null?void 0:m.value,trade_id:e.trade.value,subtrade_id:((b=e==null?void 0:e.subTrade)==null?void 0:b.value)||null}}).put(route("application.update",r.data.id),{onStart:e=>u.loading.show({message:"Submitting ..."}),onError:e=>console.log(e),onFinish:e=>u.loading.hide()})},U=d=>{d&&(o.constituency=null,u.loading.show(),axios.get(route("option.district.constituencies",d.value)).then(e=>{const{list:s}=e.data;_.constituencies=s}).catch(e=>{var s,i;u.notify({type:"negative",message:((i=(s=e==null?void 0:e.response)==null?void 0:s.data)==null?void 0:i.message)||e.toString()})}).finally(()=>u.loading.hide()))},B=d=>{d&&(o.trade=null,o.subTrade=null,u.loading.show(),axios.get(route("option.department.trades",d.value)).then(e=>{const{list:s}=e.data;_.trades=s}).catch(e=>{var s,i;u.notify({type:"negative",message:((i=(s=e==null?void 0:e.response)==null?void 0:s.data)==null?void 0:i.message)||e.toString()})}).finally(()=>u.loading.hide()))},C=d=>{d&&(o.subTrade=null,u.loading.show(),axios.get(route("option.trade.subtrades",d.value)).then(e=>{const{list:s}=e.data;_.subTrades=s}).catch(e=>{var s,i;return u.notify({type:"negative",message:((i=(s=e==null?void 0:e.response)==null?void 0:s.data)==null?void 0:i.message)||e.toString()})}).finally(()=>u.loading.hide()))};return ir(()=>{var d,e,s,i,m,b,g,f,V,v,y,h,x,k,q;U(o.district),o.constituency=(d=r==null?void 0:r.data)!=null&&d.constituency?{value:(s=(e=r.data)==null?void 0:e.constituency)==null?void 0:s.id,label:(m=(i=r==null?void 0:r.data)==null?void 0:i.constituency)==null?void 0:m.name}:null,B(o.department),o.trade=(b=r==null?void 0:r.data)!=null&&b.trade?{value:(f=(g=r.data)==null?void 0:g.trade)==null?void 0:f.id,label:(v=(V=r==null?void 0:r.data)==null?void 0:V.trade)==null?void 0:v.name}:null,C(o.trade),o.subTrade=(y=r==null?void 0:r.data)!=null&&y.sub_trade?{value:(x=(h=r.data)==null?void 0:h.sub_trade)==null?void 0:x.id,label:(q=(k=r==null?void 0:r.data)==null?void 0:k.sub_trade)==null?void 0:q.name}:null}),(d,e)=>{var s;return rr(),ur("div",gr,[l("div",fr,[l("div",null,[l("p",Vr,"Edit Application : "+cr((s=S.data)==null?void 0:s.head_of_family),1),n(sr,null,{default:or(()=>[n(T,{onClick:e[0]||(e[0]=i=>d.$inertia.get(d.route("dashboard"))),label:"Dashboard",icon:"o_dashboard"}),n(T,{onClick:e[1]||(e[1]=i=>d.$inertia.get(d.route("application.received"))),label:"Inbox"}),n(T,{label:"Edit Application"})]),_:1})])]),vr,n(_r,{onSubmit:tr,class:"row q-col-gutter-sm"},{default:or(()=>{var i,m,b,g,f,V,v,y,h,x,k,q,ge,fe,Ve,ve,ye,he,xe,ke,qe,pe,Se,Te,Ue,Be,Ce,Qe,Ne,we,Ae,Ee,De,Fe,$e,Ie,He,Me,je,ze,Ge,Je,Ke,Le,Oe,Pe,Re,We,Xe,Ye,Ze,er;return[l("div",yr,[n(c,{modelValue:t(o).head_of_family,"onUpdate:modelValue":e[2]||(e[2]=a=>t(o).head_of_family=a),"no-error-icon":"",outlined:"",error:(m=(i=t(o))==null?void 0:i.errors)==null?void 0:m.head_of_family,"error-message":(g=(b=t(o))==null?void 0:b.errors)==null?void 0:g.head_of_family,rules:[a=>!!a||"Head of family is required"],label:"Head of Family *"},null,8,["modelValue","error","error-message","rules"])]),l("div",hr,[n(c,{modelValue:t(o).mobile,"onUpdate:modelValue":e[3]||(e[3]=a=>t(o).mobile=a),mask:"##########","no-error-icon":"",outlined:"",error:(V=(f=t(o))==null?void 0:f.errors)==null?void 0:V.mobile,"error-message":(y=(v=t(o))==null?void 0:v.errors)==null?void 0:y.mobile,rules:[a=>!!a||"Mobile is required"],label:"Mobile No *"},null,8,["modelValue","error","error-message","rules"])]),l("div",xr,[n(c,{modelValue:t(o).epic_no,"onUpdate:modelValue":e[4]||(e[4]=a=>t(o).epic_no=a),"no-error-icon":"",outlined:"",error:!!((x=(h=t(o))==null?void 0:h.errors)!=null&&x.epic_no),"error-message":(q=(k=t(o))==null?void 0:k.errors)==null?void 0:q.epic_no,rules:[a=>!!a||"Epic No is required"],label:"Voter Epic No *"},null,8,["modelValue","error","error-message","rules"])]),l("div",kr,[n(c,{modelValue:t(o).address,"onUpdate:modelValue":e[5]||(e[5]=a=>t(o).address=a),type:"textarea","no-error-icon":"",outlined:"",error:(fe=(ge=t(o))==null?void 0:ge.errors)==null?void 0:fe.address,"error-message":(ve=(Ve=t(o))==null?void 0:Ve.errors)==null?void 0:ve.address,rules:[a=>!!a||"Address is required"],label:"Address *"},null,8,["modelValue","error","error-message","rules"])]),l("div",qr,[n(p,{modelValue:t(o).district,"onUpdate:modelValue":[e[6]||(e[6]=a=>t(o).district=a),U],options:S.districts,"no-error-icon":"",outlined:"",error:(he=(ye=t(o))==null?void 0:ye.errors)==null?void 0:he.district,"error-message":(ke=(xe=t(o))==null?void 0:xe.errors)==null?void 0:ke.district,rules:[a=>!!a||"District is required"],label:"District *"},null,8,["modelValue","options","error","error-message","rules"])]),l("div",pr,[n(p,{modelValue:t(o).constituency,"onUpdate:modelValue":e[7]||(e[7]=a=>t(o).constituency=a),options:_.constituencies,"no-error-icon":"",outlined:"",error:(pe=(qe=t(o))==null?void 0:qe.errors)==null?void 0:pe.constituency,"error-message":(Te=(Se=t(o))==null?void 0:Se.errors)==null?void 0:Te.constituency,rules:[a=>!!a||"Constituency is required"],label:"Constituency *"},null,8,["modelValue","options","error","error-message","rules"])]),l("div",Sr,[n(p,{modelValue:t(o).department,"onUpdate:modelValue":[e[8]||(e[8]=a=>t(o).department=a),B],options:S.departments,"no-error-icon":"",outlined:"",error:(Be=(Ue=t(o))==null?void 0:Ue.errors)==null?void 0:Be.department,"error-message":(Qe=(Ce=t(o))==null?void 0:Ce.errors)==null?void 0:Qe.department,rules:[a=>!!a||"Department is required"],label:"Department *"},null,8,["modelValue","options","error","error-message","rules"])]),l("div",Tr,[n(p,{modelValue:t(o).trade,"onUpdate:modelValue":[e[9]||(e[9]=a=>t(o).trade=a),C],options:_.trades,"no-error-icon":"",outlined:"",error:(we=(Ne=t(o))==null?void 0:Ne.errors)==null?void 0:we.trade,"error-message":(Ee=(Ae=t(o))==null?void 0:Ae.errors)==null?void 0:Ee.trade,rules:[a=>!!a||"Trade is required"],label:"Trade *"},null,8,["modelValue","options","error","error-message","rules"])]),l("div",Ur,[_.subTrades.length>0?(rr(),mr(p,{key:0,modelValue:t(o).subTrade,"onUpdate:modelValue":e[10]||(e[10]=a=>t(o).subTrade=a),options:_.subTrades,outlined:"",label:"SubTrade"},null,8,["modelValue","options"])):br("",!0)]),Br,l("div",Cr,[n(c,{modelValue:t(o).ac_no,"onUpdate:modelValue":e[11]||(e[11]=a=>t(o).ac_no=a),error:!!((Fe=(De=t(o))==null?void 0:De.errors)!=null&&Fe.ac_no),"error-message":(Ie=($e=t(o))==null?void 0:$e.errors)==null?void 0:Ie.ac_no,"no-error-icon":"",outlined:"",rules:[a=>!!a||"Account No is required"],label:"Account No *"},null,8,["modelValue","error","error-message","rules"])]),l("div",Qr,[n(c,{modelValue:t(o).bank_name,"onUpdate:modelValue":e[12]||(e[12]=a=>t(o).bank_name=a),error:!!((Me=(He=t(o))==null?void 0:He.errors)!=null&&Me.bank_name),"error-message":(ze=(je=t(o))==null?void 0:je.errors)==null?void 0:ze.bank_name,"no-error-icon":"",outlined:"",rules:[a=>!!a||"Bank name is required"],label:"Bank Name *"},null,8,["modelValue","error","error-message","rules"])]),l("div",Nr,[n(c,{modelValue:t(o).branch_name,"onUpdate:modelValue":e[13]||(e[13]=a=>t(o).branch_name=a),error:!!((Je=(Ge=t(o))==null?void 0:Ge.errors)!=null&&Je.branch_name),"error-message":(Le=(Ke=t(o))==null?void 0:Ke.errors)==null?void 0:Le.branch_name,"no-error-icon":"",outlined:"",rules:[a=>!!a||"Branch name is required"],label:"Branch Name *"},null,8,["modelValue","error","error-message","rules"])]),l("div",wr,[n(c,{modelValue:t(o).ac_holder,"onUpdate:modelValue":e[14]||(e[14]=a=>t(o).ac_holder=a),error:(Pe=(Oe=t(o))==null?void 0:Oe.errors)==null?void 0:Pe.ac_holder,"error-message":(We=(Re=t(o))==null?void 0:Re.errors)==null?void 0:We.ac_holder,"no-error-icon":"",outlined:"",rules:[a=>!!a||"Account holder is required"],label:"Account Holder"},null,8,["modelValue","error","error-message","rules"])]),l("div",Ar,[n(c,{modelValue:t(o).ifsc,"onUpdate:modelValue":e[15]||(e[15]=a=>t(o).ifsc=a),error:(Ye=(Xe=t(o))==null?void 0:Xe.errors)==null?void 0:Ye.ifsc,"error-message":(er=(Ze=t(o))==null?void 0:Ze.errors)==null?void 0:er.ifsc,"no-error-icon":"",outlined:"",rules:[a=>!!a||"IFSC is required",a=>(a==null?void 0:a.length)===11||"IFSC Code must be 11 character"],label:"IFSC *"},null,8,["modelValue","error","error-message","rules"])]),l("div",Er,[l("div",Dr,[n(ar,{type:"submit",color:"accent",label:"Update"}),n(ar,{onClick:e[16]||(e[16]=a=>d.$inertia.get(d.route("application.received"))),color:"negative",label:"Cancel"})])])]}),_:1})])}}};export{zr as default};
