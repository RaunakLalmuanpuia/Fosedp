import{Q as B,a as x}from"./QBreadcrumbs-f1fcde01.js";import{v as V,a1 as k,r as q,E as N,o as Q,c as C,w as r,a as t,d as e,Q as m,l as A,u as b,b as D,C as U,g as I,h as w,e as P,q as F,k as y,aw as S,t as j,av as E,p as L,x as O,y as z,s as R}from"./app-a7abb58d.js";import{Q as T}from"./QTable-33cc80a5.js";import{Q as M}from"./QChip-85d4182d.js";import{Q as Y}from"./QSelect-57ce204b.js";import{Q as G}from"./QForm-ea84dcf4.js";import"./use-fullscreen-7c8ce305.js";import"./rtl-36dd996b.js";const H={class:"flex justify-between items-center"},J=t("div",{class:"text-md"},"Assign Department User",-1),K=t("div",{class:"col-xs-12 col-sm-6"},[t("p",{class:"text-color"},"Department")],-1),W={class:"col-xs-12 col-sm-6"},X=t("div",{class:"col-xs-12 col-sm-6"},"Select User",-1),Z={class:"col-xs-12 col-sm-6"},ee={class:"col-xs-12"},se={class:"flex q-gutter-sm"},te={__name:"AddDepartmentUser",props:["department"],emits:["onSuccess"],setup(f,{emit:u}){const v=f,d=V({user:null}),l=k(),g=q({users:[]}),p=i=>{console.log("test"),d.transform(a=>({id:a.user.value,...a})).post(route("assignment.department",v.department.id),{preserveState:!1,onStart:a=>l.loading.show({message:"Assigning..."}),onSuccess:a=>u("onSuccess"),onFinish:a=>l.loading.hide()})};return N(()=>{console.log("test"),axios.get(route("option.users")).then(i=>{const{list:a}=i.data;g.users=a}).catch(i=>{var a,c;l.notify({type:"negative",message:(c=(a=i==null?void 0:i.response)==null?void 0:a.data)==null?void 0:c.message})})}),(i,a)=>(Q(),C(I,{class:"q-pa-md",flat:"",style:{width:"520px"}},{default:r(()=>[t("div",H,[J,e(m,{class:"q-pa-none",flat:"",icon:"close"})]),e(A,{class:"full-width q-my-md"}),e(G,{class:"row q-col-gutter-sm",onSubmit:p},{default:r(()=>{var c,_,o;return[K,t("div",W,[e(M,{label:(c=f.department)==null?void 0:c.name,square:""},null,8,["label"])]),X,t("div",Z,[e(Y,{modelValue:b(d).user,"onUpdate:modelValue":a[0]||(a[0]=s=>b(d).user=s),options:g.users,error:!!((_=b(d).errors)!=null&&_.user_id),"error-message":!!((o=b(d).errors)!=null&&o.user_id),rules:[s=>!!s||"User is required"],dense:"",outlined:""},null,8,["modelValue","options","error","error-message","rules"])]),t("div",ee,[t("div",se,[e(m,{color:"primary",label:"Confirm",type:"submit"}),D(e(m,{color:"negative",label:"Cancel",outline:""},null,512),[[U]])])])]}),_:1})]),_:1}))}},ae={class:"container bg-white q-pa-md"},oe={class:"flex justify-between items-center"},ne=t("p",{class:"page-header"},"List of Department",-1),le=t("br",null,null,-1),re={align:"right"},ie={class:"flex q-gutter-sm justify-end"},ve={__name:"Index",props:["list"],setup(f){const u=f,v=[{name:"sn",align:"left",label:"SN",field:"id"},{name:"name",align:"left",label:"Name",field:"name"},{name:"action",label:"Action",field:"id"}],d=k(),l=q({openUser:!1,department:null}),g=w(u.list.data||[]),p=w(!1),i=w({page:u.list.current_page,rowsPerPage:u.list.per_page,rowsNumber:u.list.total}),a=o=>{d.dialog({title:"Confirm Delete",message:"Do you want to delete",ok:"Yes",cancel:"No"}).onOk(()=>{S.delete(route("department.destroy",o.id),{onStart:s=>d.loading.show({message:"Deleting..."}),onFinish:s=>d.loading.hide(),preserveState:!1})})},c=o=>{l.department=o,l.openUser=!0};function _(o){const{page:s,rowsPerPage:n,sortBy:h,descending:de}=o.pagination;S.get(route("user.index"),{per_page:n,page:s},{onStart:$=>p.value=!0,onFinish:$=>p.value=!1})}return(o,s)=>(Q(),P("div",ae,[t("div",oe,[t("div",null,[ne,e(B,null,{default:r(()=>[e(x,{href:o.route("dashboard"),label:"Dashboard",icon:"o_dashboard"},null,8,["href"]),e(x,{label:"Departments"})]),_:1})]),e(m,{color:"accent",label:"New Department",onClick:s[0]||(s[0]=n=>o.$inertia.get(o.route("department.create")))})]),le,e(T,{"table-class":"text-color",flat:"","table-header-class":"table-header",pagination:i.value,"onUpdate:pagination":s[1]||(s[1]=n=>i.value=n),columns:v,filter:o.filter,loading:p.value,rows:g.value,"binary-state-sort":"","row-key":"id",onRequest:_,"rows-per-page-options":[2,5,7,15,30,50]},{"body-cell-sn":r(n=>[t("td",null,j(n.rowIndex+1),1)]),"body-cell-action":r(n=>[t("td",re,[t("div",ie,[e(m,{onClick:h=>o.$inertia.get(o.route("department.edit",n.row.id)),size:"sm",icon:"edit",outline:""},null,8,["onClick"]),e(m,{onClick:h=>a(n.row),size:"sm",icon:"delete",outline:""},null,8,["onClick"]),e(E,{flat:"",class:"q-pa-xs","dropdown-icon":"more_vert"},{default:r(()=>[e(L,null,{default:r(()=>[D((Q(),C(R,{clickable:"",onClick:h=>c(n.row)},{default:r(()=>[e(O,null,{default:r(()=>[e(z,null,{default:r(()=>[y("Add User")]),_:1})]),_:1})]),_:2},1032,["onClick"])),[[U]])]),_:2},1024)]),_:2},1024)])])]),_:1},8,["pagination","filter","loading","rows"]),e(F,{modelValue:l.openUser,"onUpdate:modelValue":s[3]||(s[3]=n=>l.openUser=n)},{default:r(()=>[e(te,{open:l.openUser,department:l.department,onOnSuccess:s[2]||(s[2]=n=>l.openUser=!1)},null,8,["open","department"])]),_:1},8,["modelValue"]),y(" /> ")]))}};export{ve as default};
