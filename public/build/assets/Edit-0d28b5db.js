import{Q as q,a as b}from"./QBreadcrumbs-f1fcde01.js";import{a1 as E,v as F,h as I,o as g,e as V,a as i,d as e,w as s,p as U,F as x,m as y,u as n,Q as h,s as w,x as m,k as B,n as z,c as L,y as $,t as O,aw as R}from"./app-a7abb58d.js";import{Q as j}from"./QForm-ea84dcf4.js";import{Q as T}from"./QChip-85d4182d.js";const Y={class:"flex justify-between items-center text-color"},A=i("p",{class:"page-header"},"Edit District",-1),G=i("br",null,null,-1),H=i("br",null,null,-1),J={class:"flex q-gutter-sm"},K=i("br",null,null,-1),Z={__name:"Edit",props:["data"],setup(D){const c=D,d=E(),t=F({code:c.data.code,name:c.data.name}),p=I(c.data.constituencies),S=o=>{d.dialog({title:"Confirm Remove",message:"Do you want to remove",ok:"Yes",cancel:"No"}).onOk(()=>{R.delete(route("constituency.detach",o.id),{onStart:a=>d.loading.show({message:"Removing..."}),onSuccess:a=>{console.log(o),p.value=p.value.filter(l=>l.id!==o.id)},onFinish:a=>d.loading.hide(),preserveState:!1})})},N=o=>{t.submit("put",route("district.update",c.data.id),{onStart:a=>d.loading.show({message:"Updating..."}),onFinish:a=>d.loading.hide()})};return(o,a)=>(g(),V(x,null,[i("div",Y,[i("div",null,[A,e(q,null,{default:s(()=>[e(b,{href:o.route("dashboard"),icon:"o_dashboard",label:"Dashboard"},null,8,["href"]),e(b,{href:o.route("district.index"),icon:"people_outline",label:"District"},null,8,["href"]),e(b,{label:"Edit District"})]),_:1})])]),G,H,e(j,{onSubmit:N},{default:s(()=>{var l,u,f,_,v,Q,C,k;return[e(y,{modelValue:n(t).code,"onUpdate:modelValue":a[0]||(a[0]=r=>n(t).code=r),error:!!((u=(l=n(t))==null?void 0:l.errors)!=null&&u.code),"error-message":!!((_=(f=n(t))==null?void 0:f.errors)!=null&&_.code),rules:[r=>!!r||"Code is required"],label:"Code *"},null,8,["modelValue","error","error-message","rules"]),e(y,{modelValue:n(t).name,"onUpdate:modelValue":a[1]||(a[1]=r=>n(t).name=r),error:!!((Q=(v=n(t))==null?void 0:v.errors)!=null&&Q.name),"error-message":!!((k=(C=n(t))==null?void 0:C.errors)!=null&&k.name),rules:[r=>!!r||"Name is required"],label:"Name *"},null,8,["modelValue","error","error-message","rules"]),i("div",J,[e(h,{class:"sized-btn",color:"accent",label:"Update",type:"submit"}),e(h,{class:"sized-btn",color:"negative",label:"Cancel",onClick:a[2]||(a[2]=r=>o.$inertia.replace(o.route("district.index")))})])]}),_:1}),K,e(U,{separator:"",title:"Constituency"},{default:s(()=>[e(w,null,{default:s(()=>[e(m,{class:"text-lg text-color"},{default:s(()=>[B("Constituencies")]),_:1})]),_:1}),(g(!0),V(x,null,z(p.value,(l,u)=>(g(),L(w,{key:u},{default:s(()=>[e(m,{avatar:""},{default:s(()=>[e(T,{label:u+1,square:""},null,8,["label"])]),_:2},1024),e(m,null,{default:s(()=>[e($,{class:"text-color"},{default:s(()=>[B(O(l==null?void 0:l.name),1)]),_:2},1024)]),_:2},1024),e(m,{side:""},{default:s(()=>[e(h,{color:"negative",icon:"delete",outline:"",size:"sm",onClick:f=>S(l)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})],64))}};export{Z as default};
