import{Q as k,a as u}from"./QBreadcrumbs-f1fcde01.js";import{a1 as N,h as i,o as Q,e as A,a as s,d as o,w as d,Q as m,F as B,aw as g,t as D}from"./app-a7abb58d.js";import{Q as C}from"./QTable-33cc80a5.js";import"./QSelect-57ce204b.js";import"./QChip-85d4182d.js";import"./rtl-36dd996b.js";import"./use-fullscreen-7c8ce305.js";const x={class:"flex justify-between items-center"},P=s("p",{class:"page-header"},"Associated Users",-1),S=s("br",null,null,-1),q={align:"right"},F={class:"flex q-gutter-sm justify-end"},z={__name:"Index",props:["list","search"],setup(p){const n=p,f=[{name:"sn",align:"left",label:"SN",field:"id"},{name:"parent",align:"left",label:"Parent",field:"parent",format:e=>(e==null?void 0:e.name)||"NA"},{name:"child",align:"left",label:"Child",field:"user",format:e=>(e==null?void 0:e.name)||"NA"},{name:"district",align:"left",label:"District",field:"district",format:e=>(e==null?void 0:e.name)||"NA"},{name:"action",label:"Action",field:"id"}],l=N();i(n.search);const b=i(n.list.data||[]),r=i(!1),c=i({page:n.list.current_page,rowsPerPage:n.list.per_page,rowsNumber:n.list.total}),h=e=>{l.dialog({title:"Confirm Delete",message:"Do you want to delete",ok:"Yes",cancel:"No"}).onOk(()=>{g.delete(route("associated-user.destroy",e.id),{onStart:a=>l.loading.show({message:"Deleting..."}),onFinish:a=>l.loading.hide(),preserveState:!1})})};function w(e){const{page:a,rowsPerPage:t,sortBy:_,descending:U}=e.pagination;console.log(e.pagination),g.get(route("associatedUser.index"),{per_page:t,page:a},{onStart:y=>r.value=!0,onFinish:y=>r.value=!1})}return(e,a)=>(Q(),A(B,null,[s("div",x,[s("div",null,[P,o(k,null,{default:d(()=>[o(u,{href:e.route("dashboard"),icon:"o_dashboard",label:"Dashboard"},null,8,["href"]),o(u,{label:"Assignments"})]),_:1})]),o(m,{color:"accent",label:"Assign User",onClick:a[0]||(a[0]=t=>e.$inertia.get(e.route("associated-user.create")))})]),S,o(C,{pagination:c.value,"onUpdate:pagination":a[1]||(a[1]=t=>c.value=t),columns:f,filter:e.filter,loading:r.value,rows:b.value,"rows-per-page-options":[2,5,7,15,30,50],"binary-state-sort":"",flat:"","row-key":"id","table-class":"text-color","table-header-class":"table-header",onRequest:w},{"body-cell-sn":d(t=>[s("td",null,D(t.rowIndex+1),1)]),"body-cell-action":d(t=>[s("td",q,[s("div",F,[o(m,{icon:"delete",outline:"",size:"sm",onClick:_=>h(t.row)},null,8,["onClick"])])])]),_:1},8,["pagination","filter","loading","rows"])],64))}};export{z as default};
